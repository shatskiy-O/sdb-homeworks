# Домашнее задание к занятию «Репликация и масштабирование. Часть 2»

### Инструкция по выполнению домашнего задания

1. Сделайте fork [репозитория c шаблоном решения](https://github.com/netology-code/sys-pattern-homework) к себе в Github и переименуйте его по названию или номеру занятия, например, https://github.com/имя-вашего-репозитория/gitlab-hw или https://github.com/имя-вашего-репозитория/8-03-hw).
2. Выполните клонирование этого репозитория к себе на ПК с помощью команды `git clone`.
3. Выполните домашнее задание и заполните у себя локально этот файл README.md:
   - впишите вверху название занятия и ваши фамилию и имя;
   - в каждом задании добавьте решение в требуемом виде: текст/код/скриншоты/ссылка;
   - для корректного добавления скриншотов воспользуйтесь инструкцией [«Как вставить скриншот в шаблон с решением»](https://github.com/netology-code/sys-pattern-homework/blob/main/screen-instruction.md);
   - при оформлении используйте возможности языка разметки md. Коротко об этом можно посмотреть в [инструкции по MarkDown](https://github.com/netology-code/sys-pattern-homework/blob/main/md-instruction.md).
4. После завершения работы над домашним заданием сделайте коммит (`git commit -m "comment"`) и отправьте его на Github (`git push origin`).
5. Для проверки домашнего задания преподавателем в личном кабинете прикрепите и отправьте ссылку на решение в виде md-файла в вашем Github.
6. Любые вопросы задавайте в чате учебной группы и/или в разделе «Вопросы по заданию» в личном кабинете.

Желаем успехов в выполнении домашнего задания.

---

### Задание 1

Опишите основные преимущества использования масштабирования методами:

- активный master-сервер и пассивный репликационный slave-сервер; 
- master-сервер и несколько slave-серверов;
- активный сервер со специальным механизмом репликации — distributed replicated block device (DRBD);
- SAN-кластер.

*Дайте ответ в свободной форме.*

---

### Ответ 1

```

-1. Активный Master-Сервер и Пассивный Репликационный Slave-Сервер:
Надежность: Если активный сервер выходит из строя, пассивный сервер может быстро взять на себя его функции.
Простота Конфигурации: Обычно такие системы легче настроить, чем системы с несколькими активными серверами.
Бэкап данных: Репликационный сервер может служить резервной копией данных, уменьшая риск потери данных.
-2. Master-Сервер и Несколько Slave-Серверов:
Балансировка Нагрузки: Несколько серверов могут распределять нагрузку, что улучшает производительность системы.
Масштабируемость: Систему легко масштабировать, добавляя новые серверы.
Улучшенная Производительность Чтения: Запросы на чтение могут быть распределены по нескольким серверам.
-3. Активный Сервер со Специальным Механизмом Репликации - DRBD:
Синхронизация Данных: DRBD обеспечивает синхронную репликацию данных между узлами, обеспечивая целостность данных.
Высокая Доступность: В случае отказа одного узла, другой узел может продолжить обслуживание запросов.
Транспарентность: Системы на основе DRBD могут быть прозрачными для приложений, работающих на уровне выше.
-4. SAN-Кластер:
Объем Хранения: SAN обеспечивает большой объем хранения, обеспечивая доступность данных.
Высокая Производительность: SAN может обеспечивать высокую пропускную способность и низкую задержку.
Централизация Хранения: Централизованное хранение облегчает управление данными и резервное копирование.
Масштабируемость и Гибкость: Можно легко добавлять новое оборудование для масштабирования хранения.
Каждый из этих подходов имеет свои собственные преимущества в зависимости от специфических требований и условий использования. При выборе конкретного метода масштабирования важно учитывать требования к надежности, производительности, цене и удобству управления.

```

### Задание 2


Разработайте план для выполнения горизонтального и вертикального шаринга базы данных. База данных состоит из трёх таблиц: 

- пользователи, 
- книги, 
- магазины (столбцы произвольно). 

Опишите принципы построения системы и их разграничение или разбивку между базами данных.

*Пришлите блоксхему, где и что будет располагаться. Опишите, в каких режимах будут работать сервера.* 

## Дополнительные задания (со звёздочкой*)
Эти задания дополнительные, то есть не обязательные к выполнению, и никак не повлияют на получение вами зачёта по этому домашнему заданию. Вы можете их выполнить, если хотите глубже шире разобраться в материале.

---

### Ответ 2

```
Горизонтальное Шардирование
При горизонтальном шардировании каждый шард (или сегмент) содержит все столбцы оригинальной таблицы, но только часть строк. Например, мы можем разделить таблицу пользователей по ID пользователей, так чтобы первый шард содержал пользователей с ID от 1 до 1000, второй от 1001 до 2000, и так далее.

Вертикальное Шардирование
Вертикальное шардирование подразумевает разделение таблицы на несколько таблиц, каждая из которых содержит подмножество столбцов оригинальной таблицы. Это может быть полезно, если некоторые столбцы используются значительно чаще других.

План Шардирования
Горизонтальное Шардирование:

Таблица Пользователи: Разделить по диапазонам ID пользователя или по хэшу ID.
Таблица Книги: Разделить по диапазонам ID книги или по жанрам.
Таблица Магазины: Разделить по диапазонам ID магазина или по географическим регионам.
Вертикальное Шардирование:

Таблица Пользователи: Отделить часто используемые столбцы, такие как имя пользователя и email, от редко используемых столбцов, например, информация о подписке.
Таблица Книги: Разделить метаданные книги и информацию о наличии.
Таблица Магазины: Разделить контактную информацию и информацию о товарах.
Разграничение Системы
Базы данных для горизонтального шардирования могут быть распределены по различным серверам или кластерам для балансировки нагрузки и избегания "точек отказа".
Базы данных для вертикального шардирования также могут быть распределены по различным серверам, в зависимости от частоты использования данных и требований к производительности.
Режимы Работы Серверов
Главные (Master) Сервера: Обрабатывают чтение и запись, реплицируют данные на Slave сервера.
Резервные (Slave) Сервера: Обрабатывают запросы на чтение, могут быть повышены до Master в случае сбоя основного сервера.
Блок-Схема
Так как я не могу создать визуальные изображения, я могу описать, как бы выглядела блок-схема.

Горизонтальное Шардирование:
Сервер 1:
Шард 1: Пользователи (ID 1-1000), Книги (ID 1-500), Магазины (ID 1-100)
Сервер 2:
Шард 2: Пользователи (ID 1001-2000), Книги (ID 501-1000), Магазины (ID 101-200)
И так далее...
Вертикальное Шардирование:
Сервер 1:
Таблица: Пользователи (Основная Информация)
Сервер 2:
Таблица: Пользователи (Дополнительная Информация)
Сервер 3:
Таблица: Книги (Метаданные)
Сервер 4:
Таблица: Книги (Информация о наличии)
И так далее...
Заключение
При разработке системы шардирования важно провести тщательный анализ требований и характеристик работы системы, учитывая частоту и типы запросов, объем данных, а также требования к отказоустойчивости и производительности.

```

### Задание 3*

Выполните настройку выбранных методов шардинга из задания 2.

*Пришлите конфиг Docker и SQL скрипт с командами для базы данных*.
